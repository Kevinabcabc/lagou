"use strict";var HOST="http://106.15.251.171:3000",HOME_JOBS_API=HOST+"/api/jobs/list",JOB_DETAIL_API=HOST+"/api/jobs/detail",SEND_CODE_API=HOST+"/api/user/get_code",REGIESTER_API=HOST+"/api/user/regiester/confirm_code",LOGOUT_API=HOST+"/api/user/login_out",SEARCH_API=HOST+"/api/user/search";JOB_DETAIL_API=HOST+"/api/job/detail";function createCityBar(){for(var t=[{cityList:["北京","上海","广州","深圳","成都","杭州"],name:"热门城市",nameStr:"热门城市"},{cityList:["安庆","蚌埠","保定","北京","毕节","包头","长春","成都","赤峰","重庆","长沙","常州","沧州","潮州","郴州","东莞","大连","大庆","大同","德阳","德州","达州","鄂州","佛山","阜阳","福州","&nbsp;"],name:"",nameStr:"ABCDEF"},{cityList:["桂林","贵阳","广州","赣州","淮安","邯郸","哈尔滨","合肥","呼和浩特","海口","黄石","衡水","海外","河源","衡阳","杭州","惠州","湖州","菏泽","吉安","金华","吉林","江门","济南","济宁","嘉兴","晋中","焦作","荆州","&nbsp;"],name:"",nameStr:"GHIJ"},{cityList:["开封","昆明","六安","聊城","廊坊","吕梁","拉萨","乐山","丽水","洛阳","临沂","龙岩","兰州","柳州","泸州","马鞍山","茂名","眉山","绵阳","梅州","宁波","南昌","南充","南京","南宁","南通","南阳"],name:"",nameStr:"KLMN"},{cityList:["平顶山","莆田","萍乡","濮阳","青岛","秦皇岛","齐齐哈尔","清远","泉州","衢州","日照","&nbsp;"],name:"",nameStr:"OPQR"},{cityList:["韶关","上海","石家庄","宿迁","商丘","上饶","汕头","汕尾","绍兴","沈阳","三亚","深圳","苏州","深圳市","天津","唐山","太原","台州"],name:"",nameStr:"STUV"},{cityList:["潍坊","武汉","芜湖","威海","乌鲁木齐","无锡","温州","西安","许昌","孝感","香港特别行政区","厦门","西宁","邢台","新乡","咸阳","襄阳","信阳","徐州","宜宾","银川","盐城","宜昌","宜春","运城","榆林","烟台","岳阳","扬州","淄博","珠海","镇江","湛江","张家口","肇庆","中山","遵义","郑州","株洲","漳州","枣庄","&nbsp;"],name:"",nameStr:"WXYZ"}],n="",o="",e=0;e<t.length;e++){n="";for(var a=0;a<t[e].cityList.length;a++)n+='<p class="item">'.concat(t[e].cityList[a],"</p> ");o+='\n      <div class="someCityBox">\n                <h5>'.concat(t[e].nameStr,'</h5>\n                <div class="someCity">\n                    ').concat(n,"\n                </div>\n            </div>\n      ")}$(".wrap").html(o)}function register(t,n,o){$.ajax({url:REGIESTER_API,method:"POST",data:{tel:t,code:n},success:function(t){0===t.status&&(console.log("注册成功"),o())},fail:function(t){console.log(t)}})}function logout(n){$.ajax({url:LOGOUT_API,method:"GET",success:function(t){0===t.status?(console.log("退出成功"),n()):console.log("退出请求失败")},fail:function(t){console.log("退出请求失败")}})}function sendCode(t,n){$.ajax({url:SEND_CODE_API,method:"GET",data:{tel:t},success:function(t){console.log(t),0===t.status?(console.log("成功"),n()):console.log("请求失败")},fail:function(t){console.log("请求失败")}})}$(".go-back").on("tap",function(){history.back()}),$(".go-home").on("tap",function(){window.open("/index","_self")}),function(t){for(var n=window.location.href.split("/"),o=n[n.length-1].split(".")[0],e="",a=0;a<t.length;a++){var i='\n        <a href="{{a}}" class="iconfont {{icon}} {{active}}">{{content}}</a>\n        '.replace(/{{a}}/,t[a].a);e+=i=(i=(i=i.replace(/{{icon}}/,t[a].icon)).replace(/{{content}}/,t[a].content)).replace(/{{active}}/,o===t[a].id?"active":"")}$(".footer").append(e)}([{id:"index",a:"/index",icon:"icon-home",content:"职位"},{id:"search",a:"/search",icon:"icon-sousuo",content:"搜索"},{id:"mine",a:"/mine",icon:"icon-wode",content:"我的"}]),$(".content").hide(),createCityBar();var userJobInfo=JSON.parse(localStorage.getItem("userJobInfo"));function searchList(n){var t={city:$(".citySelect").text()};$.ajax({url:HOME_JOBS_API,method:"GET",data:t,success:function(t){0===t.status&&n(createListDOM(t.data))},fail:function(t){alert("请求失败")}})}function createListDOM(t){for(var n="",o=0,e=t.length;o<e;o++){var a=t[o];n+='\n  <div class="item">\n            <div class="companyPic">\n                <img src="'.concat(a.companyPic,'" alt="" srcset="">\n            </div>\n\n            <div class="jobInfoBox">\n                <p class="company">').concat(a.company,'</p>\n                <p class="job">').concat(a.job," [").concat(a.city,']</p>\n                <p class="time">').concat(a.publish,'</p>\n            </div>\n\n            <div class="dalaryBox item-center">\n                <span>').concat(a.minSalary,"k-").concat(a.maxSalary,"k</span>\n            </div>\n        </div>")}return n}$(".citySelect").html(userJobInfo[1]+"<b>></b>"),$(".citySelect").on("tap",function(){$(".content").show();new IScroll(".content")}),$(".content").on("tap","p",function(){var t=JSON.parse(localStorage.getItem("userJobInfo"));t[1]=$(this).text(),$(".citySelect").html(t[1]+"<b>></b>"),localStorage.setItem("userJobInfo",JSON.stringify(t)),$(".content").hide()}),$(".search").on("tap",function(){$(".city").val()&&searchList(function(t){$(".listWrap").html(t),$(".loadMore").remove();$(".listWrap").append('\n            <div class="loadMore item-center">\n            点击加载更多\n        </div>\n            ')})}),$(".mainlist").on("tap",".loadMore",function(){searchList(function(t){$(".loadMore").remove(),$(".listWrap").append(t);$(".listWrap").append('\n        <div class="loadMore item-center">\n        点击加载更多\n    </div>\n        ')})}),$(".mainlist").on("tap",".item",function(){console.log(this);var t=$(this).find(".companyPic img")[0].src,n=$(this).find(".company").text(),o=$(this).find(".job").text(),e=o.split("[")[0],a=o.split("[")[1].substring(0,o.split("[")[1].length-1),i=$(this).find(".time").text(),c=$(this).find(".dalaryBox span").text();console.log(t),console.log(n),console.log(e),console.log(a),console.log(i),console.log(c);var s={pic:t,companyName:n,jobAndCity:o,jobName:e,jobCity:a,time:i,dalary:c};localStorage.setItem("jobDetail",JSON.stringify(s)),window.open("jobinfo","_self")});